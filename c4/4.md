# 四、编辑器基础

——我的世界我做主！

**<font color=ff0000>提示：本章节介绍的编辑器操作，以电脑版操作为例。</font>**

**<font color=ff0000>电脑版点击鼠标，手机版为点击屏幕，电脑版点击鼠标右键，手机版则为双击屏幕。</font>**

### 1.编辑器主菜单概述

SM4J是有关卡制造模式的（1.9版本加入），而在2.0版本编辑器进行了一次大革新，操作方式变化，所以我们可以自由创造马力欧的关卡啦！

首先在主菜单进入“额外模式”（西班牙语MODOS EXTRA 英语EXTRA）

然后选择“关卡编辑器”（CREADOR DE NIVELS）

<img src="./c4/image-20201125211042797.png" alt="image-20201125211042797" style="zoom:150%;" /><img src="./c4/image-20201125211048248.png" alt="image-20201125211048248" style="zoom:150%;" />



<img src="./c4/image-20201125211155981.png" alt="image-20201125211155981" style="zoom:150%;" />

这就是编辑器的主界面啦～

从上到下依次为“制造关卡”，“游玩关卡”，“全球关卡”和“全球关卡（网页）”。

### 2.编辑器的基本操作

点击制造关卡（西班牙语CREAR NIVEL，英语CREATE LEVEL）进入关卡编辑器。

如果你在设置里启用了自动保存，且有一个做了一半没保存的关卡，他会提示你是否加载自动保存。（Yes/No）

<img src="./c4/image-20201125211302060.png" alt="image-20201125211302060" />

如果你第一次打开编辑器，则没有这个提示，直接进入编辑器。

<img src="./c4/image-20201125211323748.png" alt="image-20201125211323748" style="zoom:150%;" />

进入编辑器，你可能会说：“哎？这咋啥也没有呢？马力欧在哪？”

先别急～你把光标往下移动（手机版使用左下角方向键，电脑版移动鼠标），就可以看见你的马力欧啦！

<img src="./c4/image-20201125211407452.png" alt="image-20201125211407452" style="zoom:150%;" />

这就是编辑器的主界面啦！

编辑器主体分为物品栏、工具栏和关卡区。物品栏分八大类，分别是方块，自然物品，道具，机关，敌怪，Boss，NPC和关卡物品。（下面标注的英文是这些物品在材质包中对应的文件夹，是高阶教程内容，现在可暂时不用理会），工具栏中包含关卡的配置，拖动部件，橡皮擦等。而下面则是你的关卡。

### 3.放置物品

俗话说，万丈高楼平地起，所以我们如果想制造一个关卡，得先学会放置和删除方块。

首先点击打开左上角的“方块”栏。<img src="./c4/image-20201125211433839.png" alt="image-20201125211433839"/>

<img src="./c4/image-20201125211503150.png" alt="image-20201125211503150" style="zoom:150%;" />

方块栏分4页，不过这里我们只讲前两页。物品栏就相当于画家的调色板，你想放置什么都可以从这里取。我这里以铺地为例讲解放置方块。

<img src="./c4/image-20201125211516609.png" alt="image-20201125211516609" style="zoom:150%;" />首先点击一个方块，这里我以草地为例。

<img src="./c4/image-20201125211542997.png" alt="image-20201125211542997" style="zoom:150%;" />

然后在场景中按住并拖动鼠标（手机版则是直接拖动），就可以放置方块了~放置完后你可以右键点击关卡空白处（手机版为双击）回到物品栏。如果觉得物品栏太挡视线怎么办？

<img src="./c4/image-20201125211555065.png" alt="image-20201125211555065"/>点击展开的物品栏标签，就可以收起物品栏了~

<img src="./c4/image-20201125211609984.png" alt="image-20201125211609984"/>在右下角可以切换页数。自然物品，道具等的放置同理。

### 4.删除和拖动物品

<img src="./c4/image-20201125211702051.png" alt="image-20201125211702051" style="zoom:150%;" />

如图，我搭建了一个简单的小场景，可是不小心多放了一个栗宝宝和两块地面。我想删除它们怎么办呢？

SM4J编辑器里有两种删除物品的方法。第一种是右键点击物品将其删除。我们对着想要删除的物品点鼠标右键（手机版是双击）

<img src="./c4/image-20201125211712680.png" alt="image-20201125211712680"/>

如果看到物品消失了，并有物品碎掉的音效，就说明这个东西被删除了。

第二种就是使用橡皮擦。SM4J的编辑器工具栏有个小橡皮擦，<img src="./c4/image-20201125211734558.png" alt="image-20201125211734558"/>我们点击它展开橡皮擦工具。 

<img src="./c4/image-20201125211758922.png" alt="image-20201125211758922"/> <img src="./c4/image-20201125211818096.png" alt="image-20201125211818096" style="zoom:150%;" />

这里可以看到，有三种不同的橡皮擦。红色的橡皮擦用于删除常规物品，这里点击选择红色橡皮擦。

（绿色蓝色的橡皮本章暂时不讲。）

可以看到你的光标变成了一个小橡皮~这时候对着你想删除的东西擦擦擦！就会把它们全部擦掉啦~擦完之后对空白处点击鼠标右键，就可以退出橡皮擦模式了！

**注：电脑版还可以长按鼠标右键进入红色橡皮擦模式哦。**

<img src="./c4/image-20201125211852366.png" alt="image-20201125211852366" style="zoom:80%;" />

SM4J的工具栏还有一个小手爪。使用这个工具可以拖动物品。点击它，切换到手爪光标，就可以拖动物品了~在手爪光标模式，也可以长按一个物品进行像素级的微调，这对于制造微操关卡很有帮助！如果想回到普通的手指光标，点击右键即可。

### 5.道具的使用

~~众所周知~~，马力欧爱吃蘑菇，所以蘑菇等帮助马力欧变强的道具必不可少。

<img src="./c4/image-20201125212402700.png" alt="image-20201125212402700" style="zoom:150%;" />

这里的<img src="./c4/image-20201125212415463.png" alt="image-20201125212415463"/>道具栏可以看到各种道具，有我们熟悉的道具，比如蘑菇啊火焰花啊DDJ弹簧啊什么的。我们可以像放置方块一样直接放置他们。而有的道具（比如弹簧）是竖着的。我们可以点击一下这个弹簧，一阵白烟闪过，这样它就变成横的了！

<img src="./c4/image-20201125212426606.png" alt="image-20201125212426606" style="zoom:80%;" />

对敌怪点击，也可以改变形态，如慢慢龟、酷霸王等。

关于各种道具的作用，大家可以自行去Mario Wiki查询。

原版马力欧游戏里，好多道具都是放在？砖块里面的。而SM4J里我们也可以这么做！玩过《超级马力欧创作家》（马里奥制造）的小伙伴肯定会说：“把道具拖动到？砖块上不就得了！”可是在SM4J里我们不能用这种方式将道具塞入砖块。

<img src="./c4/image-20201125212812273.png" alt="image-20201125212812273" style="zoom:80%;" />

如果这样，道具会从？砖块里掉下来，而不是塞入其中。正确的打开方式是：选择蘑菇，对着？砖块点击，就可以把蘑菇放入？砖块。听到开关音效时，说明放进去了。效果如图：<img src="./c4/image-20201125212824026.png" alt="image-20201125212824026"/>

### 6.切换创作和游玩状态

SM4J当然也可以像马造一样，随时切换创作和游玩。可以点击右上角的JUGAR（游玩）按钮，随时进入游玩模式测试关卡。在暂停菜单里选择VOLVER A EDICION（英文RETURN TO EDITOR），就可以返回编辑器。注意！SM4J和马造不一样，地图里的马力欧是关卡起始点，如果你在测试关卡的时候随意拖动，记得把他放回原位，否则游玩做好的关卡，马力欧的起始位置也会在那里。

点击<img src="./c4/image-20201125212946922.png" alt="image-20201125212946922" style="zoom:80%;" />可以隐藏或显示网格。

### 7.特殊道具

在<img src="./c4/image-20201125213029000.png" alt="image-20201125213029000"/>特殊道具栏可以看到大部分的特殊道具。这里先讲几个最基础的，其他的后面再讲。

<img src="./c4/image-20201125213044714.png" alt="image-20201125213044714" style="zoom: 67%;" />\- 中间旗。有两种样式可选。（NSMBWii、SMW）这个是马力欧的保存点，如果马力欧吃到这个旗子，死后将会在此处复活。SM4J没有中间旗数量限制。

<img src="./c4/image-20201125213054564.png" alt="image-20201125213054564" style="zoom: 67%;" /> \- 过关旗。有三种样式可选。（SMB1、SMW、SMB3）。马力欧吃到这个就可以过关。关卡中必须放置一个过关旗（过关模式或竞速模式），否则马力欧将无法过关。

<img src="./c4/image-20201125213103762.png" alt="image-20201125213103762" style="zoom:80%;" />  \- 管子。­­­有三种颜色，两种方向。

配合<img src="./c4/image-20201125213110391.png" alt="image-20201125213110391" style="zoom:80%;" />可以达­­­到钻管子的效果。使用例：<img src="./c4/image-20201125213121768.png" alt="image-20201125213121768" style="zoom:80%;" />

<img src="./c4/image-20201125213143221.png" alt="image-20201125213143221" style="zoom: 50%;" /> -灯泡。有七种颜色。

在黑夜模式（见下一节）中放置此物可提供照明。上排为不可见的灯泡，下排为可见灯泡。可通过多个混合来调色。使用例：

<img src="./c4/image-20201125213200320.png" alt="image-20201125213200320"/>

<img src="./c4/image-20201125213230623.png" alt="image-20201125213230623" style="zoom:80%;" />\- 手电筒。在黑夜模式，马力欧抱着可以提供移动的光源。使用例：

<img src="./c4/image-20201125213239383.png" alt="image-20201125213239383" style="zoom: 150%;" />

<img src="./c4/image-20201125213247049.png" alt="image-20201125213247049" style="zoom:80%;" /> \- 过关城堡。配合<img src="./c4/image-20201125213257337.png" alt="image-20201125213257337" style="zoom:80%;" />使用可达到过关进城堡的效果。放在过关旗右侧，马力欧过关后会走进城堡，而不是一直向右走。由于bug，此物无法移除，如果不小心放下，而不想要，就把他拖远一点吧！

<img src="./c4/image-20201125213316288.png" alt="image-20201125213316288" style="zoom:80%;" /> \- 文本框。可以在地图上展示文字（不支持中文）。使用例：

<img src="./c4/image-20201125213329260.png" alt="image-20201125213329260" style="zoom:150%;" />

<img src="./c4/image-20201125213335241.png" alt="image-20201125213335241" style="zoom:80%;" /> \- 对话框砖块。放置后在其上叠加一个文本框，就可以展示对话框。                               

<img src="./c4/image-20201125213343669.png" alt="image-20201125213343669" style="zoom: 80%;" />当马力欧顶这个砖块，就会显示对话框。

<img src="./c4/image-20201125213353829.png" alt="image-20201125213353829"/>

<img src="./c4/image-20201125213420842.png" alt="image-20201125213420842" style="zoom:80%;" /> \- “道具”栏的这3个物品，是奇诺比奥队长模式（见下文）的道具。马力欧无法使用！

剩余的特殊道具，详见《编辑器进阶》。

### 8.关卡配置，以及保存和载入关卡

点击右上角的红色感叹号按钮<img src="./c4/image-20201127190146695.png" alt="image-20201127190146695" style="zoom:80%;" />，可以打开关卡配置菜单。

#### 关卡配置第一页：

<img src="./c4/image-20201127190154065.png" alt="image-20201127190154065" style="zoom:150%;" />

左上角的两个红绿色按钮，就是保存和载入关卡。绿色为保存，红色为载入。

<img src="./c4/image-20201127190212317.png" alt="image-20201127190212317" style="zoom: 80%;" /><img src="./c4/image-20201127190228574.png" alt="image-20201127190228574" style="zoom:110%;" />

电脑版保存界面：首先选择文件位置（建议选择**%AppData%\Super_Mario_4_Jugadores\Niveles**，制作世界时候方便），然后输入关卡名字，点击确定保存即可。（像极了其他软件的另存为）

手机版保存，则是直接输入关卡名字保存即可。

**<font color=ff0000 size=5>注意：关卡名字中不能有汉字和中文标点（如句号）！！！否则保存的关卡会无法加载！</font>**

加载关卡和保存关卡类似，这里不再赘述。

当游戏中出现如下字的时候，说明进行了自动保存，可以加载草稿。

<img src="./c4/image-20201127190345668.png" alt="image-20201127190345668" style="zoom:80%;" />

使用<img src="./c4/image-20201127190410951.png" alt="image-20201127190410951" style="zoom:80%;" />按钮可以切换材质包。这个在材质包章节会讲~

使用<img src="./c4/image-20201127190426398.png" alt="image-20201127190426398" style="zoom:80%;" />按钮可以设置地图的边界大小。单位是像素（一格16像素），默认为8000x432（500x27格）。

使用<img src="./c4/image-20201127190432660.png" alt="image-20201127190432660"/>可以切换关卡的背景（地面，地下，夜晚等）。SM4J一共有39张背景，绝大部分来自原版马力欧游戏，有几个卡洛斯原创的背景。

使用<img src="./c4/image-20201127190446766.png" alt="image-20201127190446766" style="zoom:125%;" />可以切换关卡的音乐。原版一共有63首音乐，有大概30首~~（具体有几首我也分不清，因为有些没听过orz）~~是来自原版马力欧游戏的配乐，另外的来自明星大乱斗、卡普空游戏和超级炸弹人4。（谢志有写），C开头的则为自定义音乐（以后会讲）。背景和音乐的列表详见《背景和音乐列表》章节。

使用<img src="./c4/image-20201127190636487.png" alt="image-20201127190636487"/>按钮可切换游戏模式，分别有传统的<img src="./c4/image-20201127190647513.png" alt="image-20201127190647513" style="zoom:80%;" />过关模式，刺激的<img src="./c4/image-20201127190653636.png" alt="image-20201127190653636" style="zoom:80%;" />竞速模式（此模式规则类似马造的对战），欢乐的<img src="./c4/image-20201127190659777.png" alt="image-20201127190659777" style="zoom:80%;" />乱斗模式（规则类似隔壁SMBX的2人乱斗模式，不过这个是4人）和创意的<img src="./c4/image-20201127190706718.png" alt="image-20201127190706718" style="zoom:80%;" />奇诺比奥队长模式。

奇诺比奥队长模式，操作的人物是奇诺比奥队长。队长无法跳跃，但如果得到FLUDD<img src="./c4/image-20201127190734946.png" alt="image-20201127190734946" style="zoom:80%;" />，可以进行短暂飞行。

使用<img src="./c4/image-20201127190807976.png" alt="image-20201127190807976" style="zoom: 50%;" />可以翻页。

#### 关卡配置第二页：

<img src="./c4/image-20201127190849385.png" alt="image-20201127190849385" style="zoom:150%;" />

使用<img src="./c4/image-20201127190920531.png" alt="image-20201127190920531"/>可以调整玩家数。可以设置允许几个人游玩。默认为1个。

打开<img src="./c4/image-20201127190932827.png" alt="image-20201127190932827" style="zoom:80%;" />，可以在关卡中放置一个“愤怒的太阳”<img src="./c4/image-20201127190936603.png" alt="image-20201127190936603" style="zoom:80%;" />。愤怒的太阳是无敌的，无法被击败。太阳会在天空中悬停，时不时的飞下来冲撞玩家。

打开<img src="./c4/image-20201127190944858.png" alt="image-20201127190944858" style="zoom:80%;" />，关卡的天空将会有迷雾。（迷雾甚至会在暂停菜单之上，细节）

打开<img src="./c4/image-20201127190954544.png" alt="image-20201127190954544" style="zoom:80%;" />，关卡中将会飘起雪花。只是装饰特效，没有实质功能。适用于冰雪关卡。

打开<img src="./c4/image-20201127191003911.png" alt="image-20201127191003911" style="zoom:80%;" />，关卡的地上将会飞出泡泡鱼<img src="./c4/image-20201127191003911.png" alt="image-20201127191003911" style="zoom:80%;" />。泡泡鱼的移速很快，小心！适用于海滩关卡，不适用于水下关卡。

打开<img src="./c4/image-20201127191014073.png" alt="image-20201127191014073" style="zoom:50%;" />，关卡中将会下雨。只是装饰特效，没有实质功能。

使用<img src="./c4/image-20201127191026089.png" alt="image-20201127191026089"/>，可以调整计时器。打开<img src="./c4/image-20201127191034589.png" alt="image-20201127191034589" style="zoom:80%;" />，关卡会有计时。下面的数字为秒数。当时间小于100秒时，音乐节奏也会变快。

<font size=2>SM4J有一个bug，~~因为GameMaker:Studio这落后的引擎~~，在时间小于100秒时的BGM音调会升高，声音很尖锐。</font>

打开<img src="./c4/image-20201127191040872.png" alt="image-20201127191040872" style="zoom:80%;" />，马力欧将可以使用踢墙跳和滑下墙壁。

#### 关卡配置第三页：

<img src="./c4/image-20201127191223868.png" alt="image-20201127191223868" style="zoom:150%;" />

<img src="./c4/image-20201127191241727.png" alt="image-20201127191241727" style="zoom:80%;" />按钮在现版本的SM4J还未实装。

使用<img src="./c4/image-20201127191322625.png" alt="image-20201127191322625"/>可以给关卡设置自动卷轴。分别为无 OFF、很慢 VERY SLOW、慢SLOW、正常 NORMAL、快 FAST、很快 VERT FAST。SM4J的代码中还有一种“疯狂 INSANE”自动卷轴速度，比“很快”还要快，但未实装。

打开<img src="./c4/image-20201127191335671.png" alt="image-20201127191335671" style="zoom:80%;" />将启用一种类似《超级马力欧银河》的血量机制。人物将有3格血，被攻击会掉血，而不是掉状态，吃蘑菇补血。

打开<img src="./c4/image-20201127191343439.png" alt="image-20201127191343439" style="zoom:80%;" />![image-20201127191348132](image-20201127191348132.png)将**禁用**关卡中的旋转跳动作。

打开<img src="./c4/image-20201127191343439.png" alt="image-20201127191343439" style="zoom:80%;" />![image-20201127191348132](image-20201127191348132.png)![image-20201127191352746](image-20201127191352746.png)就可以使用空中旋转。

打开![image-20201127191352746](image-20201127191352746.png)就可以使用臀部撞地。

打开<img src="./c4/image-20201127191358565.png" alt="image-20201127191358565" style="zoom:80%;" />将**禁用**物品框和取回物品的功能。

打开<img src="./c4/image-20201127191406395.png" alt="image-20201127191406395" style="zoom:80%;" />![image-20201127191416915](image-20201127191416915.png)将使关卡变成水关。推荐搭配海洋背景使用。

打开<img src="./c4/image-20201127191406395.png" alt="image-20201127191406395" style="zoom:80%;" />![image-20201127191416915](image-20201127191416915.png)将启用黑夜模式。在此模式下，场景将变得伸手不见五指，推荐搭配黑色调背景。可以使用灯泡方块提升亮度。  

<img src="./c4/image-20201127191422249.png" alt="image-20201127191422249" style="zoom:150%;" />

打开<img src="./c4/image-20201127191429784.png" alt="image-20201127191429784" style="zoom:80%;" />将**禁用**关卡中的下滑动作。

打开<img src="./c4/image-20201127191436033.png" alt="image-20201127191436033" style="zoom:80%;" />![image-20201127191441297](image-20201127191441297.png)将**禁用**关卡中搬运物品的动作。

打开<img src="./c4/image-20201127191436033.png" alt="image-20201127191436033" style="zoom:80%;" />![image-20201127191441297](image-20201127191441297.png)将**禁用**关卡中拔起物品的动作。

### 9.管理，分享和游玩关卡

SM4J电脑版可以直接找到你保存的关卡文件，如<img src="./c4/image-20201127191511960.png" alt="image-20201127191511960"/>，并用QQ，微信等分享出去。

在SM4J手机版里，你不能直接重命名你的关卡，也不能在游戏内删除。这时候我们就需要翻文件夹来找到你的关卡文件。首先你需要一个文件管理器（部分手机自带的可能并不好用，这里用MT管理器做演示）。

首先在你的手机里打开文件管理器<img src="./c4/image-20201127191526571.png" alt="image-20201127191526571" style="zoom:80%;" />，然后找到**内部存储/SM4J/Niveles**文件夹（下称“关卡目录”）。

 <img src="./c4/image-20201127191546149.png" alt="image-20201127191546149" style="zoom:80%;" />

打开这个文件夹，你就可以看到你的关卡喽~

<img src="./c4/image-20201127191558047.png" alt="image-20201127191558047" style="zoom:125%;" />

这时你就可以对你的关卡进行改名，删除，分享等操作。

那么从QQ群下载的关卡如何导入呢？

依次打开**内部存储/Android/data/com.tencent.mobileqq/Tencent/QQfile_recv**目录

<img src="./c4/image-20201127191629662.png" alt="image-20201127191629662" style="zoom:80%;" />

这个文件夹里就是你从QQ下载的文件啦！把你下载的关卡移动到**关卡目录**，进游戏就可以看到了~